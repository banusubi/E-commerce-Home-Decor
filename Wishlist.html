<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Wishlist</title>
    <link rel="stylesheet" href="Wishlist.css">

    <style>

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 60px;
            background-color: #2c3e50;
            color: white;
        }
        .nav-links a {
            margin-right: 22px;
            text-decoration: none;
            color:white;
            font-size: 15px;
        }
        .image{
            height: 20px;
            width: 20px;
            border-radius: 0;
        }
        body{
            font-family: Arial;
            background:#f8f8f8;
            
        }
        h2{
            text-align:center;
            margin-bottom:20px;
        }
        .item-box{
            width: 300px;
            background:white;
            border-radius:10px;
            padding:15px;
            margin:10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .container{
            display:flex;
            flex-wrap:wrap;
            justify-content:center;
        }
        img{
            width:100%;
            height:220px;
            border-radius:10px;
        }
        .name{
            font-size:18px;
            margin:10px 0;
            font-weight:bold;
        }
        .price{
            color:green;
            font-size:16px;
        }
        .remove-btn{
            margin-top:10px;
            padding:8px 12px;
            background:red;
            color:white;
            border:none;
            border-radius:6px;
            cursor:pointer;
        }
        .cart-icon img{
            height: 25px;
        }
    </style>
</head>
<body>


    <div class="header">
        <h2 class="title">Wishlist</h2>

        <div class="nav-links">
            <a href="index.html">Home</a>
            
            <a href="Cart.html" class="cart-icon" style="position:relative; display:inline-block;">
                        <img src="cart.png" width="25">
                        <span id="cartBadge" class="cart-badge" style="
                        background:red;
                        color:white;
                        padding:2px 6px;
                        border-radius:50%;
                        font-size:12px;
                        position:absolute;
                        top:-8px;
                        right:-10px;">0</span>
            </a>
        </div>
    </div>

<h2>My Wishlist ❤️</h2>

<div id="wishlistContainer" class="container"></div>

<script>

// Check login
function isLoggedIn() {
    return sessionStorage.getItem("loggedIn") === "true";
}

function getUser() {
    return sessionStorage.getItem("username");
}

// Load Wishlist
function loadWishlist() {

    // if (!isLoggedIn()) {
    //     alert("Please login first!");
    //     window.location.href = "Login.html";
    //     return;
    // }

    let user = getUser();
    let wishlistKey = "wishlist_" + user;

    let wishlist = JSON.parse(localStorage.getItem(wishlistKey)) || [];

    let box = document.getElementById("wishlistContainer");
    box.innerHTML = "";

    if (wishlist.length === 0) {
        box.innerHTML = "<h3>No items in wishlist</h3>";
        return;
    }

    wishlist.forEach((item, index) => {
        box.innerHTML += `
            <div class="item-box">
                <img src="${item.img}" alt="">
                <div class="name">${item.name}</div>
                <div class="price">₹ ${item.price}</div>
                <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
            </div>
        `;
    });
}

// Remove item
function removeItem(index) {
    let user = getUser();
    let wishlistKey = "wishlist_" + user;

    let wishlist = JSON.parse(localStorage.getItem(wishlistKey)) || [];

    wishlist.splice(index, 1);
    localStorage.setItem(wishlistKey, JSON.stringify(wishlist));

    loadWishlist();
}

loadWishlist();

  // Update Cart Badge
function updateCartBadge() {
    let user = sessionStorage.getItem("username");
    let badge = document.getElementById("cartBadge");

    if (!badge) return;

    if (user) {
        let cartKey = "cart_" + user;
        let items = JSON.parse(localStorage.getItem(cartKey)) || [];
        badge.innerText = items.length;
        badge.style.display = items.length > 0 ? "inline-block" : "none";
    } else {
        badge.innerText = 0;
        badge.style.display = "none";
    }
}

</script>

</body>
</html>
